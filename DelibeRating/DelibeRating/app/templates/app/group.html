{% extends "app/layout.html" %}

{% load crispy_forms_tags %}
{% load staticfiles %}

{% include 'app/messages.html' %}
{% include 'app/form_errors.html' %}

{% block content %}
<div class="jumbotron">
    <div class="container">
        <h1 class="display-4">{{ group.name }}</h1>
    </div>
</div>

<div class="container">
    <div class="row">
        <ul>
            <li><p><h4>Add a member</h4></p></li>
            <li><form id="addusertogroup" action="{% url 'group' %}?g={{ group.name }}" method="post" class="form-horizontal">
                {% csrf_token %}
                {{ form.usr|as_crispy_field }}
                {{ form.act }}
                {{ form.grp }}
                <input name="aa" type="hidden" value="add">
                <input name="ga" type="hidden" value="{{ group.name }}">
                <input class="btn btn-primary grp-add" type="submit" value="Add user">
            </form></li>
        </ul>
        
    </div>
    <br/>
    <div class="row">
        <ul>
            <li><h4>Group members</h4></li>
            <li>
                <form id="remuserfromgroup" action="{% url 'group' %}?g={{ group.name }}" method="post" class="form-horizontal">
                    {% csrf_token %}
                    <ul>
                        {% for u in users %}
                        <li>
                            {{ form.act }}
                            {{ form.grp }}
                            {{ form.usrh }}
                            <input name="ur" type="hidden" value="{{ u.username }}">
                            <input class="btn btn-danger grp-rem" type="submit" value="-">
                            <a href="{% url 'profile' %}?u={{ u.username }}">{{ u.username }}</a>
                        </li>
                        {% endfor %}
                        <li><input name="ar" type="hidden" value="rem"></li>
                        <li><input name="gr" type="hidden" value="{{ group.name }}"></li>
                    </ul>
                </form>
            </li>
        </ul>
        
    </div>
</div>
{% endblock %}